<style>
    .secao-navegacao { display: flex; flex-direction: column; min-width: 0; overflow: hidden; }
    .secao-responsaveis { display: none; }
    .secao-setores { flex: 1; min-width: 0; border-right: none; }
    .secao-etapas { flex: 1; max-width: 50%; }

    .nav-card-etapa { display: flex; align-items: center; gap: 8px; padding: var(--espacamento-sm); background: var(--cor-fundo); border: 1px solid var(--cor-borda); border-left: 3px solid var(--cor-primaria); border-radius: var(--raio-sm); min-width: 180px; max-width: 220px; cursor: pointer; transition: var(--transicao-rapida); flex-shrink: 0; }
    .nav-card-etapa:hover { border-color: var(--cor-primaria); background: var(--cor-primaria-bg); transform: translateY(-2px); box-shadow: var(--sombra-sm); }
    .nav-etapa-status { width: 28px; height: 28px; border-radius: var(--raio-sm); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; flex-shrink: 0; }
    .nav-etapa-info { flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 2px; }
    .nav-etapa-nome { font-size: var(--tamanho-xs); font-weight: 600; color: var(--cor-texto); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .nav-etapa-projeto { display: flex; align-items: center; gap: 4px; font-size: 0.625rem; color: var(--cor-texto-terciario); }
    .nav-etapa-projeto i { font-size: 0.6rem; color: var(--cor-primaria); }

    .nav-titulo { display: flex; align-items: center; gap: var(--espacamento-sm); padding: var(--espacamento-sm) var(--espacamento-md); background: var(--cor-fundo); border-bottom: 1px solid var(--cor-borda); font-size: var(--tamanho-sm); font-weight: 600; color: var(--cor-texto-secundario); flex-shrink: 0; }
    .nav-titulo i { color: var(--cor-primaria); font-size: 0.875rem; }
    .nav-contador { margin-left: auto; background: var(--cor-primaria-bg); color: var(--cor-primaria); padding: 2px 8px; border-radius: var(--raio-sm); font-size: var(--tamanho-xs); font-weight: 700; }
    .nav-scroll-container { flex: 1; overflow-x: auto; overflow-y: hidden; scrollbar-width: thin; scrollbar-color: var(--cor-borda) transparent; }
    .nav-scroll-container::-webkit-scrollbar { height: 6px; }
    .nav-scroll-container::-webkit-scrollbar-track { background: transparent; }
    .nav-scroll-container::-webkit-scrollbar-thumb { background: var(--cor-borda); border-radius: 3px; }
    .nav-scroll-container::-webkit-scrollbar-thumb:hover { background: var(--cor-borda-forte); }
    .nav-lista { display: flex; gap: var(--espacamento-sm); padding: var(--espacamento-sm) var(--espacamento-md); padding-bottom: 12px; min-height: 100%; align-items: center; }
    
    .nav-card-setor { display: flex; flex-direction: column; gap: 4px; padding: var(--espacamento-sm); background: var(--cor-fundo); border: 2px solid var(--cor-borda); border-radius: var(--raio-md); min-width: 160px; cursor: pointer; transition: var(--transicao-rapida); flex-shrink: 0; position: relative; }
    .nav-card-setor:hover { border-color: var(--cor-primaria); background: var(--cor-primaria-bg); transform: translateY(-2px); box-shadow: var(--sombra-sm); }
    .nav-card-setor.colapsado { opacity: 0.5; border-style: dashed; }
    .nav-setor-header { display: flex; align-items: center; gap: 6px; }
    .nav-setor-icone { width: 24px; height: 24px; background: var(--cor-primaria-bg); color: var(--cor-primaria); border-radius: var(--raio-sm); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; flex-shrink: 0; }
    .nav-setor-nome { font-size: var(--tamanho-xs); font-weight: 600; color: var(--cor-texto); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; }
    .nav-setor-stats { display: flex; gap: 8px; font-size: 0.625rem; color: var(--cor-texto-terciario); }
    .nav-setor-stat { display: flex; align-items: center; gap: 3px; }
    .nav-setor-stat i { font-size: 0.75rem; }
    .nav-setor-stat.projetos { color: var(--cor-primaria); }
    .nav-setor-stat.pendentes { color: var(--cor-aviso); font-weight: 600; }
    .nav-badge-colapsado { position: absolute; top: 4px; right: 4px; background: var(--cor-aviso); color: white; font-size: 0.5rem; padding: 2px 4px; border-radius: var(--raio-sm); font-weight: 700; }

    .contador-pendentes { display: flex; align-items: center; gap: var(--espacamento-sm); background: rgba(255, 255, 255, 0.1); padding: var(--espacamento-sm) var(--espacamento-md); border-radius: 20px; font-size: var(--tamanho-sm); }
    .contador-pendentes i { color: var(--cor-aviso); }
    .contador-pendentes.animando { animation: pulseContador 0.6s ease; }
    @keyframes pulseContador { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.08); background: rgba(255, 255, 255, 0.2); } }

    .btn-bloqueio { display: flex; align-items: center; gap: var(--espacamento-sm); padding: var(--espacamento-sm) var(--espacamento-md); border: 2px solid transparent; border-radius: var(--raio-md); font-size: var(--tamanho-sm); font-weight: 600; cursor: pointer; transition: var(--transicao-media); }
    .btn-bloqueio.editavel { background: rgba(101, 163, 13, 0.2); color: #bef264; border-color: rgba(101, 163, 13, 0.4); }
    .btn-bloqueio.bloqueado { background: rgba(220, 38, 38, 0.2); color: #fca5a5; border-color: rgba(220, 38, 38, 0.4); }

    .btn-cabecalho { display: flex; align-items: center; gap: var(--espacamento-sm); padding: var(--espacamento-sm) var(--espacamento-md); background: rgba(255, 255, 255, 0.1); border: none; border-radius: var(--raio-md); color: white; font-size: var(--tamanho-sm); cursor: pointer; transition: var(--transicao-rapida); }
    .btn-cabecalho:hover { background: rgba(255, 255, 255, 0.2); }
    .btn-cabecalho.destaque { background: var(--cor-primaria); }
    .btn-toggle-painel { display: none; }
    @media (max-width: 900px) { .btn-toggle-painel { display: flex; } }

    /* ========== INDICADOR DE ZOOM - MOVIDO PARA SUPERIOR DIREITO ========== */
    .indicador-zoom { 
      position: fixed; 
      top: calc(var(--altura-header) + 130px); 
      right: calc(var(--largura-painel) + var(--espacamento-lg)); 
      display: flex; 
      align-items: center; 
      gap: 6px; 
      padding: 8px 14px; 
      background: var(--cor-fundo-card); 
      border-radius: var(--raio-md); 
      box-shadow: var(--sombra-sm); 
      z-index: var(--z-controles); 
      font-size: var(--tamanho-sm); 
      font-weight: 600; 
      color: var(--cor-texto-secundario); 
      opacity: 0.85; 
      transition: opacity 0.2s ease; 
      pointer-events: none; 
      border: 1px solid var(--cor-borda);
    }
    @media (max-width: 900px) { 
      .indicador-zoom { 
        right: var(--espacamento-lg); 
      } 
    }
    .indicador-zoom i { font-size: 0.75rem; color: var(--cor-primaria); }
    .indicador-zoom.ativo { opacity: 1; background: var(--cor-primaria-bg); }

    /* ========== BOTÃƒO FLUTUANTE - MOVIDO PARA INFERIOR DIREITO ========== */
    .btn-flutuante-container { 
      position: fixed; 
      bottom: var(--espacamento-lg); 
      right: calc(var(--largura-painel) + var(--espacamento-lg)); 
      z-index: var(--z-controles); 
    }
    @media (max-width: 900px) { 
      .btn-flutuante-container { 
        right: var(--espacamento-lg); 
      } 
    }
    .btn-flutuante { width: 56px; height: 56px; border-radius: var(--raio-circular); border: none; background: var(--cor-primaria); color: white; font-size: 1.5rem; cursor: pointer; box-shadow: var(--sombra-lg); display: flex; align-items: center; justify-content: center; transition: var(--transicao-media); }
    .btn-flutuante:hover { background: var(--cor-primaria-hover); transform: scale(1.05); }
    .btn-flutuante:disabled { background: var(--cor-borda-forte); cursor: not-allowed; transform: none; }

    /* Menu flutuante abre para a esquerda agora */
    .menu-flutuante { 
      position: absolute; 
      bottom: 70px; 
      right: 0; 
      left: auto;
      background: var(--cor-fundo-card); 
      border-radius: var(--raio-md); 
      box-shadow: var(--sombra-xl); 
      padding: var(--espacamento-sm); 
      min-width: 180px; 
      opacity: 0; 
      visibility: hidden; 
      transform: translateY(10px); 
      transition: var(--transicao-media); 
      border: 1px solid var(--cor-borda);
    }
    .menu-flutuante.visivel { opacity: 1; visibility: visible; transform: translateY(0); }
    .menu-flutuante-item { display: flex; align-items: center; gap: var(--espacamento-sm); padding: var(--espacamento-sm) var(--espacamento-md); border: none; background: none; width: 100%; text-align: left; font-size: var(--tamanho-sm); color: var(--cor-texto); cursor: pointer; border-radius: var(--raio-sm); transition: var(--transicao-rapida); }
    .menu-flutuante-item:hover { background: var(--cor-primaria-bg); color: var(--cor-primaria); }
    .menu-flutuante-item i { width: 20px; text-align: center; }

    .painel-resumo { background: var(--cor-fundo-card); border-left: 1px solid var(--cor-borda); display: flex; flex-direction: column; z-index: var(--z-painel); overflow: hidden; }
    @media (max-width: 900px) { .painel-resumo { position: fixed; top: var(--altura-header); right: 0; bottom: 0; width: 320px; max-width: 90vw; transform: translateX(100%); transition: transform var(--transicao-media); box-shadow: var(--sombra-xl); } .painel-resumo.aberto { transform: translateX(0); } }
    .painel-overlay { display: none; }
    @media (max-width: 900px) { .painel-overlay { display: block; position: fixed; top: var(--altura-header); left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.4); z-index: calc(var(--z-painel) - 1); opacity: 0; visibility: hidden; transition: var(--transicao-media); } .painel-overlay.visivel { opacity: 1; visibility: visible; } }
    .painel-header { padding: var(--espacamento-md) var(--espacamento-lg); border-bottom: 1px solid var(--cor-borda); display: flex; align-items: center; justify-content: space-between; background: var(--cor-fundo); }
    .painel-titulo { display: flex; align-items: center; gap: var(--espacamento-sm); font-family: var(--fonte-titulo); font-size: var(--tamanho-base); font-weight: 600; }
    .painel-titulo i { color: var(--cor-primaria); }
    .btn-fechar-painel { display: none; width: 32px; height: 32px; border: none; background: transparent; color: var(--cor-texto-secundario); font-size: 1.25rem; cursor: pointer; border-radius: var(--raio-sm); }
    @media (max-width: 900px) { .btn-fechar-painel { display: flex; align-items: center; justify-content: center; } }
    .painel-conteudo { flex: 1; padding: var(--espacamento-md); overflow-y: auto; }

    .resumo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--espacamento-sm); margin-bottom: var(--espacamento-lg); }
    .resumo-card { background: var(--cor-fundo); padding: var(--espacamento-md); border-radius: var(--raio-md); text-align: center; }
    .resumo-card-valor { font-family: var(--fonte-titulo); font-size: 1.5rem; font-weight: 700; color: var(--cor-primaria); line-height: 1; }
    .resumo-card-label { font-size: var(--tamanho-xs); color: var(--cor-texto-terciario); margin-top: 4px; }
    .resumo-card.pendentes .resumo-card-valor { color: var(--cor-aviso); }
    .resumo-card.bloqueadas .resumo-card-valor { color: var(--cor-perigo); }

    .filtros-secao { margin-top: var(--espacamento-lg); padding-top: var(--espacamento-lg); border-top: 1px solid var(--cor-borda); }
    .filtros-titulo { display: flex; align-items: center; gap: var(--espacamento-sm); font-size: var(--tamanho-sm); font-weight: 600; color: var(--cor-texto-secundario); margin-bottom: var(--espacamento-md); }
    .filtros-titulo i { color: var(--cor-primaria); }
    .filtro-grupo { margin-bottom: var(--espacamento-md); }
    .filtro-grupo-titulo { font-size: var(--tamanho-xs); font-weight: 600; color: var(--cor-texto-terciario); text-transform: uppercase; margin-bottom: var(--espacamento-sm); }
    .filtro-item { display: flex; align-items: center; gap: var(--espacamento-sm); padding: var(--espacamento-xs) var(--espacamento-sm); border-radius: var(--raio-sm); cursor: pointer; transition: var(--transicao-rapida); }
    .filtro-item:hover { background: var(--cor-primaria-bg); }
    .filtro-item input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--cor-primaria); cursor: pointer; }
    .filtro-item label { flex: 1; font-size: var(--tamanho-sm); cursor: pointer; }
    .filtro-item .filtro-contador { padding: 2px 8px; background: var(--cor-fundo); border-radius: var(--raio-sm); font-size: var(--tamanho-xs); font-weight: 600; color: var(--cor-texto-terciario); }
    .filtro-item.oculto label { text-decoration: line-through; color: var(--cor-texto-terciario); }
    .btn-limpar-filtros { width: 100%; padding: var(--espacamento-sm); border: 1px dashed var(--cor-borda); border-radius: var(--raio-md); background: transparent; color: var(--cor-texto-terciario); font-size: var(--tamanho-xs); cursor: pointer; transition: var(--transicao-rapida); margin-top: var(--espacamento-sm); }
    .btn-limpar-filtros:hover { background: var(--status-bloqueada-bg); color: var(--cor-perigo); border-color: var(--cor-perigo); }

    .resumo-secao { margin-top: var(--espacamento-lg); }
    .resumo-secao-titulo { display: flex; align-items: center; gap: var(--espacamento-sm); font-size: var(--tamanho-sm); font-weight: 600; color: var(--cor-texto-secundario); margin-bottom: var(--espacamento-md); }
    .resumo-secao-titulo i { color: var(--cor-primaria); }
    .lista-responsaveis-resumo { display: flex; flex-direction: column; gap: var(--espacamento-sm); }
    .item-resp-resumo { display: flex; align-items: center; justify-content: space-between; padding: var(--espacamento-sm) var(--espacamento-md); background: var(--cor-fundo); border-radius: var(--raio-md); cursor: pointer; transition: var(--transicao-rapida); }
    .item-resp-resumo:hover { background: var(--cor-primaria); color: white; }
    .item-resp-nome { font-size: var(--tamanho-sm); font-weight: 500; }
    .item-resp-badges { display: flex; gap: 6px; }
    .item-resp-badge { padding: 2px 8px; border-radius: var(--raio-sm); font-size: var(--tamanho-xs); font-weight: 600; }
    .item-resp-badge.projetos { background: var(--cor-primaria-bg); color: var(--cor-primaria); }
    .item-resp-badge.pendentes { background: var(--status-bloqueada-bg); color: var(--cor-perigo); }
    .item-resp-resumo:hover .item-resp-badge { background: rgba(255, 255, 255, 0.2); color: white; }

    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: var(--z-modal); opacity: 0; visibility: hidden; transition: var(--transicao-media); padding: var(--espacamento-lg); }
    .modal-overlay.visivel { opacity: 1; visibility: visible; }
    .modal { background: var(--cor-fundo-card); border-radius: var(--raio-lg); box-shadow: var(--sombra-xl); width: 100%; max-width: 500px; max-height: 90vh; display: flex; flex-direction: column; transform: scale(0.95); transition: var(--transicao-media); }
    .modal-overlay.visivel .modal { transform: scale(1); }
    .modal-header { padding: var(--espacamento-md) var(--espacamento-lg); border-bottom: 1px solid var(--cor-borda); display: flex; align-items: center; justify-content: space-between; }
    .modal-header h3 { font-family: var(--fonte-titulo); font-size: 1.0625rem; font-weight: 600; display: flex; align-items: center; gap: var(--espacamento-sm); }
    .modal-header h3 i { color: var(--cor-primaria); }
    .modal-fechar { width: 32px; height: 32px; border: none; background: transparent; color: var(--cor-texto-secundario); font-size: 1.25rem; cursor: pointer; border-radius: var(--raio-sm); display: flex; align-items: center; justify-content: center; transition: var(--transicao-rapida); }
    .modal-fechar:hover { background: var(--status-bloqueada-bg); color: var(--cor-perigo); }
    .modal-body { padding: var(--espacamento-lg); overflow-y: auto; flex: 1; }

    .info-etapa-pai { background: var(--cor-primaria-bg); border-left: 3px solid var(--cor-primaria); padding: var(--espacamento-sm) var(--espacamento-md); border-radius: 0 var(--raio-sm) var(--raio-sm) 0; margin-bottom: var(--espacamento-md); font-size: var(--tamanho-sm); color: var(--cor-primaria); }
    .info-etapa-pai i { margin-right: var(--espacamento-sm); }
    .campo-form { margin-bottom: var(--espacamento-md); }
    .campo-form:last-child { margin-bottom: 0; }
    .campo-form label { display: block; font-size: var(--tamanho-sm); font-weight: 500; color: var(--cor-texto-secundario); margin-bottom: 6px; }
    .campo-form label .obrigatorio { color: var(--cor-perigo); }
    .campo-form input, .campo-form select, .campo-form textarea { width: 100%; padding: var(--espacamento-sm) var(--espacamento-md); border: 1px solid var(--cor-borda); border-radius: var(--raio-md); font-family: var(--fonte-corpo); font-size: var(--tamanho-base); color: var(--cor-texto); background: var(--cor-fundo-card); transition: var(--transicao-rapida); }
    .campo-form input:focus, .campo-form select:focus, .campo-form textarea:focus { outline: none; border-color: var(--cor-primaria); box-shadow: 0 0 0 3px var(--cor-primaria-bg); }
    .campo-form textarea { min-height: 80px; resize: vertical; }
    .modal-footer { padding: var(--espacamento-md) var(--espacamento-lg); border-top: 1px solid var(--cor-borda); display: flex; align-items: center; justify-content: flex-end; gap: var(--espacamento-sm); background: var(--cor-fundo); }

    .btn { padding: var(--espacamento-sm) var(--espacamento-lg); border: none; border-radius: var(--raio-md); font-family: var(--fonte-corpo); font-size: var(--tamanho-sm); font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: var(--espacamento-sm); transition: var(--transicao-rapida); }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .btn-primario { background: var(--cor-primaria); color: white; }
    .btn-primario:hover:not(:disabled) { background: var(--cor-primaria-hover); }
    .btn-secundario { background: var(--cor-fundo); color: var(--cor-texto); border: 1px solid var(--cor-borda); }
    .btn-secundario:hover:not(:disabled) { background: var(--cor-borda); }
    .btn-perigo { background: var(--cor-perigo); color: white; }
    .btn-perigo:hover:not(:disabled) { background: #b91c1c; }

    .toast-container { position: fixed; bottom: var(--espacamento-lg); right: calc(var(--largura-painel) + var(--espacamento-lg)); z-index: var(--z-toast); display: flex; flex-direction: column; gap: var(--espacamento-sm); pointer-events: none; }
    @media (max-width: 900px) { .toast-container { right: var(--espacamento-lg); left: var(--espacamento-lg); } }
    .toast { background: var(--cor-fundo-card); border-radius: var(--raio-md); box-shadow: var(--sombra-lg); padding: var(--espacamento-md); display: flex; align-items: center; gap: var(--espacamento-md); min-width: 280px; max-width: 400px; pointer-events: auto; animation: toastEntrar 0.3s ease; border: 1px solid var(--cor-borda); }
    @keyframes toastEntrar { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    .toast.saindo { animation: toastSair 0.3s ease forwards; }
    @keyframes toastSair { to { transform: translateX(100%); opacity: 0; } }
    .toast-icone { font-size: 1.25rem; flex-shrink: 0; }
    .toast.sucesso .toast-icone { color: var(--cor-sucesso); }
    .toast.erro .toast-icone { color: var(--cor-perigo); }
    .toast.info .toast-icone { color: var(--cor-info); }
    .toast.aviso .toast-icone { color: var(--cor-aviso); }
    .toast-texto { flex: 1; font-size: var(--tamanho-sm); color: var(--cor-texto); }

    .loader-overlay {
       position: fixed;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: #fcf4dc;
       display: flex;
       flex-direction: column;
       align-items: center;
       justify-content: center;
       z-index: var(--z-loader);
       transition: opacity 0.4s ease, visibility 0.4s ease;
    }
    .loader-overlay.oculto {
       opacity: 0;
       visibility: hidden;
       pointer-events: none;
    }
    .loader-gif {
       max-width: 400px;
       width: 80%;
       height: auto;
    }
    .loader-texto {
      margin-top: 24px;
      font-family: var(--fonte-titulo);
      font-size: 1rem;
      color: #57534e;
      letter-spacing: 0.5px;
    }

    body.modo-bloqueado .card-projeto, body.modo-bloqueado .card-responsavel, body.modo-bloqueado .card-etapa, body.modo-bloqueado .card-setor { cursor: default; }
    body.modo-bloqueado .ponto-conexao { display: none !important; }
    .oculto { display: none !important; }

    .dashboard-setores-container { margin-bottom: var(--espacamento-md); }
    .dashboard-setores-titulo { display: flex; align-items: center; gap: var(--espacamento-sm); padding: var(--espacamento-sm); font-weight: 600; color: var(--cor-texto-secundario); border-bottom: 1px solid var(--cor-borda); margin-bottom: var(--espacamento-sm); }
    .dashboard-setores-titulo i { color: var(--cor-primaria); }
    #dashboardSetores { display: flex; flex-direction: column; gap: var(--espacamento-sm); max-height: 280px; overflow-y: auto; padding-right: var(--espacamento-xs); }
    .dashboard-setor-card { background: var(--cor-fundo); border: 1px solid var(--cor-borda); border-radius: var(--raio-sm); padding: var(--espacamento-sm); cursor: pointer; transition: var(--transicao-rapida); }
    .dashboard-setor-card:hover { border-color: var(--cor-primaria); background: var(--cor-primaria-bg); transform: translateX(4px); }
    .dashboard-setor-header { display: flex; align-items: center; gap: 6px; margin-bottom: 8px; }
    .dashboard-setor-header i { color: var(--cor-primaria); font-size: 0.875rem; }
    .dashboard-setor-nome { font-weight: 600; font-size: var(--tamanho-sm); color: var(--cor-texto); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .dashboard-setor-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 8px; }
    .dashboard-stat { display: flex; flex-direction: column; align-items: center; text-align: center; }
    .dashboard-stat-valor { font-weight: 700; font-size: var(--tamanho-sm); color: var(--cor-texto); }
    .dashboard-stat-label { font-size: 0.625rem; color: var(--cor-texto-terciario); text-transform: uppercase; }
    .dashboard-stat.destaque .dashboard-stat-valor { font-size: 1rem; }
    .dashboard-setor-barra { height: 4px; background: var(--cor-borda); border-radius: 2px; overflow: hidden; }
    .dashboard-setor-progresso { height: 100%; border-radius: 2px; transition: width 0.5s ease; }
    .dashboard-vazio { text-align: center; padding: var(--espacamento-md); color: var(--cor-texto-terciario); font-size: var(--tamanho-sm); font-style: italic; }
    #filtrosVisibilidade { margin-top: var(--espacamento-sm); padding-top: var(--espacamento-sm); border-top: 1px dashed var(--cor-borda); }
    #filtrosVisibilidade .filtro-item { padding: 8px; background: var(--cor-fundo); border-radius: var(--raio-sm); margin-bottom: 6px; }
    #filtrosVisibilidade .filtro-item:hover { background: var(--cor-primaria-bg); }
    #filtrosVisibilidade .filtro-item i { margin-right: 6px; color: var(--cor-texto-terciario); }

    /* ========== PAINEL FIXO DE RESPONSÃVEIS - CORES AJUSTADAS ========== */


    /* Multi-select de responsÃ¡veis nos modais */
    .multi-select-responsaveis {
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid var(--cor-borda);
      border-radius: var(--raio-sm);
      padding: var(--espacamento-sm);
      background: var(--cor-fundo);
    }
    .checkbox-responsavel {
      display: flex;
      align-items: center;
      gap: var(--espacamento-sm);
      padding: 6px 8px;
      border-radius: var(--raio-sm);
      cursor: pointer;
      transition: var(--transicao-rapida);
    }
    .checkbox-responsavel:hover {
      background: var(--cor-primaria-bg);
    }
    .checkbox-responsavel input[type="checkbox"] {
      width: 16px;
      height: 16px;
      accent-color: var(--cor-primaria);
    }
    .checkbox-nome {
      font-size: var(--tamanho-sm);
      font-weight: 500;
    }
    .checkbox-cargo {
      font-size: var(--tamanho-xs);
      color: var(--cor-texto-terciario);
    }
    .texto-ajuda {
      font-size: var(--tamanho-xs);
      color: var(--cor-texto-terciario);
      margin-top: 4px;
      display: block;
    }

    /* Modal de OrganizaÃ§Ã£o */
    .modal-organizacao {
      max-width: 600px;
    }
    .opcoes-layout {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin: 24px 0;
    }
    .opcao-layout {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      border: 2px solid var(--cor-borda);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--cor-fundo);
    }
    .opcao-layout:hover {
      border-color: var(--cor-primaria);
      background: var(--cor-primaria-bg);
    }
    .opcao-layout.selecionada {
      border-color: var(--cor-primaria);
      background: var(--cor-primaria-bg);
      box-shadow: 0 0 0 4px rgba(180, 83, 9, 0.2);
    }
    .opcao-layout-icone {
      width: 80px;
      height: 60px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .opcao-layout-icone svg {
      width: 100%;
      height: 100%;
    }
    .opcao-layout-nome {
      font-weight: 600;
      font-size: var(--tamanho-sm);
      color: var(--cor-texto);
    }
    .config-espacamento {
      margin-top: 16px;
      padding: 16px;
      background: var(--cor-fundo);
      border-radius: 8px;
    }
    .config-espacamento label {
      display: block;
      font-size: var(--tamanho-sm);
      font-weight: 500;
      margin-bottom: 8px;
    }
    .config-espacamento input[type="range"] {
      width: 100%;
      accent-color: var(--cor-primaria);
    }

    /* Painel fixo - setores clicÃ¡veis - cores ajustadas */
    .resp-envolvimento-item.setor-clicavel {
      cursor: pointer;
      background: linear-gradient(135deg, #44403c, #292524);
      color: #e7e5e4;
      border: 1px solid #78716c;
    }
    .resp-envolvimento-item.setor-clicavel:hover {
      background: linear-gradient(135deg, var(--cor-primaria), var(--cor-primaria-hover));
      border-color: var(--cor-primaria-clara);
    }

    /* ==========================================
       SISTEMA DE PRIORIDADES
       ========================================== */
    /* BotÃµes de aÃ§Ã£o no card do responsÃ¡vel */
    .resp-acoes-container {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid var(--cor-borda);
    }
    .btn-resp-acao {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 8px 10px;
      border: 1px solid var(--cor-borda);
      border-radius: var(--raio-sm);
      background: var(--cor-fundo);
      color: var(--cor-texto-secundario);
      font-size: var(--tamanho-xs);
      cursor: pointer;
      transition: var(--transicao-rapida);
    }
    .btn-resp-acao:hover {
      background: var(--cor-primaria-bg);
      border-color: var(--cor-primaria);
      color: var(--cor-primaria);
    }
    .btn-resp-acao i {
      font-size: 0.75rem;
    }

    /* Badge de prioridade nos cards */
    .badge-prioridade {
      position: absolute;
      top: -8px;
      right: -8px;
      min-width: 26px;
      height: 26px;
      background: linear-gradient(135deg, #b45309, #92400e);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(180, 83, 9, 0.4);
      z-index: 15;
      animation: pulsePrioridade 2s infinite;
    }
    .badge-prioridade.prioridade-1 {
      background: linear-gradient(135deg, #dc2626, #991b1b);
      animation: pulsePrioridade1 1.5s infinite;
    }
    .badge-prioridade.prioridade-2 {
      background: linear-gradient(135deg, #ea580c, #c2410c);
    }
    .badge-prioridade.prioridade-3 {
      background: linear-gradient(135deg, #ca8a04, #a16207);
    }
    @keyframes pulsePrioridade {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    @keyframes pulsePrioridade1 {
      0%, 100% { transform: scale(1); box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4); }
      50% { transform: scale(1.1); box-shadow: 0 4px 16px rgba(220, 38, 38, 0.6); }
    }

    /* Modal de Prioridades */
    .modal-prioridades {
      max-width: 600px;
      max-height: 85vh;
    }
    .modal-prioridades .modal-body {
      max-height: 60vh;
      overflow-y: auto;
    }
    .lista-prioridades-container {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .item-prioridade {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--cor-fundo);
      border: 1px solid var(--cor-borda);
      border-radius: var(--raio-md);
      cursor: grab;
      transition: var(--transicao-rapida);
    }
    .item-prioridade:hover {
      border-color: var(--cor-primaria);
      background: var(--cor-primaria-bg);
    }
    .item-prioridade.arrastando {
      opacity: 0.5;
      border-style: dashed;
    }
    .item-prioridade.sobre {
      border-color: var(--cor-primaria);
      background: rgba(180, 83, 9, 0.15);
    }
    .item-prioridade-handle {
      color: var(--cor-texto-terciario);
      cursor: grab;
    }
    .item-prioridade-numero {
      min-width: 32px;
      height: 32px;
      background: var(--cor-primaria);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: var(--tamanho-sm);
    }
    .item-prioridade-info {
      flex: 1;
      min-width: 0;
    }
    .item-prioridade-nome {
      font-weight: 600;
      font-size: var(--tamanho-sm);
      color: var(--cor-texto);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .item-prioridade-meta {
      font-size: var(--tamanho-xs);
      color: var(--cor-texto-terciario);
    }
    .item-prioridade-toggle {
      padding: 6px;
      background: none;
      border: none;
      color: var(--cor-texto-terciario);
      cursor: pointer;
      border-radius: var(--raio-sm);
    }
    .item-prioridade-toggle:hover {
      background: var(--cor-borda);
      color: var(--cor-primaria);
    }
    /* Sub-lista de etapas dentro do projeto */
    .etapas-prioridade-container {
      margin-left: 44px;
      margin-top: 8px;
      padding-left: 12px;
      border-left: 2px solid var(--cor-borda);
    }
    .item-etapa-prioridade {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      background: var(--cor-fundo-card);
      border: 1px solid var(--cor-borda);
      border-radius: var(--raio-sm);
      margin-bottom: 6px;
      cursor: grab;
      font-size: var(--tamanho-xs);
    }
    .item-etapa-prioridade:hover {
      border-color: var(--cor-primaria);
    }
    .item-etapa-numero {
      min-width: 22px;
      height: 22px;
      background: var(--cor-borda);
      color: var(--cor-texto-secundario);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 10px;
    }
    /* Modal de Envio de Email */
    .modal-envio-email {
      max-width: 550px;
    }
    .destinatario-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--cor-fundo);
      border-radius: var(--raio-md);
      margin-bottom: 16px;
    }
    .destinatario-avatar {
      width: 48px;
      height: 48px;
      background: var(--cor-primaria);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1rem;
    }
    .destinatario-dados h4 {
      margin: 0;
      font-size: var(--tamanho-base);
    }
    .destinatario-dados p {
      margin: 4px 0 0 0;
      font-size: var(--tamanho-sm);
      color: var(--cor-texto-secundario);
    }
    .selecao-projetos-envio {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid var(--cor-borda);
      border-radius: var(--raio-md);
      padding: var(--espacamento-sm);
    }
    .projeto-checkbox-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: var(--raio-sm);
      cursor: pointer;
      transition: var(--transicao-rapida);
    }
    .projeto-checkbox-item:hover {
      background: var(--cor-primaria-bg);
    }
    .projeto-checkbox-item input {
      width: 18px;
      height: 18px;
      accent-color: var(--cor-primaria);
    }
    .projeto-checkbox-info {
      flex: 1;
    }
    .projeto-checkbox-nome {
      font-weight: 500;
      font-size: var(--tamanho-sm);
    }
    .projeto-checkbox-setor {
      font-size: var(--tamanho-xs);
      color: var(--cor-texto-terciario);
    }
    /* Item de prioridade na lista do painel lateral */
    .resp-projeto-com-prioridade {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .mini-badge-prioridade {
      min-width: 18px;
      height: 18px;
      background: var(--cor-primaria);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: 700;
      flex-shrink: 0;
    }
    .mini-badge-prioridade.p1 {
      background: #dc2626;
    }
    .mini-badge-prioridade.p2 {
      background: #ea580c;
    }
    .mini-badge-prioridade.p3 {
      background: #ca8a04;
    }

/* ========== CORREÃ‡ÃƒO: Itens de Projeto/Etapa no Painel ========== */
.resp-envolvimento-grupo {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 8px;
}

.resp-envolvimento-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background: var(--cor-fundo);
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-sm);
  font-size: var(--tamanho-xs);
  cursor: pointer;
  transition: var(--transicao-rapida);
  width: 100%;              /* Ocupa largura total */
  box-sizing: border-box;
}

.resp-envolvimento-item:hover {
  background: var(--cor-primaria-bg);
  border-color: var(--cor-primaria);
}

/* Badge de prioridade - formato quadrado/circular, NÃƒO oval */
.mini-badge-prioridade {
  min-width: 20px;
  width: 20px;
  height: 20px;
  padding: 0;
  background: var(--cor-primaria);
  color: white;
  border-radius: 4px;       /* Quadrado arredondado, nÃ£o oval */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 700;
  flex-shrink: 0;
}

.mini-badge-prioridade.p1 {
  background: #dc2626;
}

.mini-badge-prioridade.p2 {
  background: #ea580c;
}

.mini-badge-prioridade.p3 {
  background: #ca8a04;
}

/* TÃ­tulo do grupo */
.resp-envolvimento-titulo {
  font-size: 10px;
  font-weight: 600;
  color: var(--cor-texto-terciario);
  text-transform: uppercase;
  padding: 4px 0;
  display: flex;
  align-items: center;
  gap: 6px;
}

.resp-envolvimento-titulo i {
  color: var(--cor-primaria);
  font-size: 11px;
}

/* ========== SISTEMA DE PENDÃŠNCIAS ESTRUTURADAS - MODAL ========== */
.campo-pendencias-estruturadas {
  border: 2px solid var(--cor-borda);
  border-radius: var(--raio-lg);
  padding: 0;
  background: var(--cor-fundo);
  overflow: hidden;
}

.campo-pendencias-estruturadas > label {
  display: flex;
  align-items: center;
  gap: var(--espacamento-sm);
  padding: var(--espacamento-md);
  margin: 0;
  background: linear-gradient(135deg, #44403c 0%, #292524 100%);
  color: #fef3c7;
  font-weight: 600;
  font-size: var(--tamanho-sm);
}

.campo-pendencias-estruturadas > label i {
  color: #d97706;
}

.contador-pendencias {
  font-size: var(--tamanho-xs);
  background: rgba(217, 119, 6, 0.3);
  color: #fef3c7;
  padding: 4px 10px;
  border-radius: 12px;
  margin-left: auto;
  font-weight: 700;
}

/* Container de adicionar pendÃªncia */
.pendencias-adicionar {
  display: flex;
  gap: var(--espacamento-sm);
  padding: var(--espacamento-md);
  background: var(--cor-fundo-card);
  border-bottom: 1px solid var(--cor-borda);
  flex-wrap: wrap;
}

.pendencias-adicionar .input-pendencia {
  flex: 1;
  min-width: 200px;
  padding: 10px 14px;
  border: 2px solid var(--cor-borda);
  border-radius: var(--raio-md);
  font-size: var(--tamanho-sm);
  font-family: var(--fonte-corpo);
  transition: var(--transicao-rapida);
  background: white;
}

.pendencias-adicionar .input-pendencia:focus {
  outline: none;
  border-color: var(--cor-primaria);
  box-shadow: 0 0 0 3px var(--cor-primaria-bg);
}

.pendencias-adicionar .input-pendencia::placeholder {
  color: var(--cor-texto-terciario);
}

.pendencias-adicionar .select-urgencia {
  padding: 10px 12px;
  border: 2px solid var(--cor-borda);
  border-radius: var(--raio-md);
  font-size: var(--tamanho-sm);
  font-family: var(--fonte-corpo);
  background: white;
  cursor: pointer;
  min-width: 120px;
  transition: var(--transicao-rapida);
}

.pendencias-adicionar .select-urgencia:focus {
  outline: none;
  border-color: var(--cor-primaria);
}

.btn-add-pendencia {
  padding: 10px 16px;
  background: linear-gradient(135deg, var(--cor-primaria), var(--cor-primaria-hover));
  color: white;
  border: none;
  border-radius: var(--raio-md);
  cursor: pointer;
  transition: var(--transicao-rapida);
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  box-shadow: 0 2px 8px rgba(180, 83, 9, 0.3);
}

.btn-add-pendencia:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(180, 83, 9, 0.4);
}

.btn-add-pendencia:active {
  transform: translateY(0);
}

/* Lista de pendÃªncias no modal */
.lista-pendencias-modal {
  max-height: 250px;
  overflow-y: auto;
  padding: var(--espacamento-sm);
  display: flex;
  flex-direction: column;
  gap: 8px;
  background: var(--cor-fundo);
}

.pendencias-vazio {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--espacamento-md);
  padding: var(--espacamento-xl, 32px);
  color: var(--cor-texto-terciario);
  font-size: var(--tamanho-sm);
}

.pendencias-vazio i {
  font-size: 2.5rem;
  opacity: 0.3;
  color: var(--cor-sucesso);
}

/* Item de pendÃªncia no modal */
.item-pendencia-modal {
  display: flex;
  align-items: center;
  gap: var(--espacamento-md);
  padding: 12px 14px;
  background: var(--cor-fundo-card);
  border: 2px solid var(--cor-borda);
  border-radius: var(--raio-md);
  transition: var(--transicao-rapida);
}

.item-pendencia-modal:hover {
  border-color: var(--cor-primaria);
  box-shadow: var(--sombra-sm);
}

.item-pendencia-modal.concluido {
  opacity: 0.6;
  background: var(--cor-fundo);
  border-style: dashed;
}

.item-pendencia-modal.concluido .pendencia-texto {
  text-decoration: line-through;
  color: var(--cor-texto-terciario);
}

/* Checkbox customizado */
.pendencia-checkbox-wrapper {
  position: relative;
  width: 22px;
  height: 22px;
  flex-shrink: 0;
}

.pendencia-checkbox {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
  z-index: 2;
  margin: 0;
}

.pendencia-checkbox-visual {
  position: absolute;
  top: 0;
  left: 0;
  width: 22px;
  height: 22px;
  border: 2px solid var(--cor-borda-forte);
  border-radius: 6px;
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transicao-rapida);
}

.pendencia-checkbox-visual i {
  font-size: 12px;
  color: white;
  opacity: 0;
  transform: scale(0);
  transition: var(--transicao-rapida);
}

.pendencia-checkbox:checked + .pendencia-checkbox-visual {
  background: var(--cor-sucesso);
  border-color: var(--cor-sucesso);
}

.pendencia-checkbox:checked + .pendencia-checkbox-visual i {
  opacity: 1;
  transform: scale(1);
}

.pendencia-checkbox:hover + .pendencia-checkbox-visual {
  border-color: var(--cor-primaria);
}

.pendencia-checkbox:focus + .pendencia-checkbox-visual {
  box-shadow: 0 0 0 3px var(--cor-primaria-bg);
}

/* Badge de urgÃªncia */
.pendencia-urgencia-badge {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
  box-shadow: 0 0 0 2px white, 0 0 0 3px currentColor;
}

.pendencia-urgencia-badge.alta { 
  background: #dc2626; 
  color: #dc2626;
}
.pendencia-urgencia-badge.media { 
  background: #ca8a04; 
  color: #ca8a04;
}
.pendencia-urgencia-badge.baixa { 
  background: #65a30d; 
  color: #65a30d;
}

.pendencia-texto {
  flex: 1;
  font-size: var(--tamanho-sm);
  word-break: break-word;
  line-height: 1.4;
  color: var(--cor-texto);
}

.btn-remover-pendencia {
  padding: 6px 8px;
  background: transparent;
  border: none;
  color: var(--cor-texto-terciario);
  cursor: pointer;
  opacity: 0;
  transition: var(--transicao-rapida);
  border-radius: var(--raio-sm);
}

.item-pendencia-modal:hover .btn-remover-pendencia {
  opacity: 1;
}

.btn-remover-pendencia:hover {
  color: var(--cor-perigo);
  background: var(--status-bloqueada-bg);
}

/* ========== PENDÃŠNCIAS NO CARD DA ETAPA ========== */
.etapa-pendencias-lista {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: var(--espacamento-sm);
}

.etapa-pendencia-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: var(--cor-fundo-card);
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-sm);
  font-size: var(--tamanho-xs);
  transition: var(--transicao-rapida);
  cursor: default;
}

.etapa-pendencia-item:hover {
  background: var(--cor-primaria-bg);
  border-color: var(--cor-primaria);
}

.etapa-pendencia-item.concluido {
  opacity: 0.5;
  background: var(--cor-fundo);
}

.etapa-pendencia-item.concluido .pendencia-item-texto {
  text-decoration: line-through;
  color: var(--cor-texto-terciario);
}

/* Checkbox no card da etapa */
.etapa-pendencia-checkbox {
  width: 16px;
  height: 16px;
  accent-color: var(--cor-sucesso);
  cursor: pointer;
  flex-shrink: 0;
}

.etapa-pendencia-checkbox:hover {
  transform: scale(1.1);
}

.pendencia-item-urgencia {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.pendencia-item-urgencia.alta { background: #dc2626; }
.pendencia-item-urgencia.media { background: #ca8a04; }
.pendencia-item-urgencia.baixa { background: #65a30d; }

.pendencia-item-texto {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Badge de contagem de pendÃªncias no header da etapa */
.badge-pendencias {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  border-radius: 10px;
  font-size: var(--tamanho-xs);
  font-weight: 600;
}

.badge-pendencias.tem-urgentes {
  background: rgba(220, 38, 38, 0.15);
  color: #dc2626;
  border: 1px solid rgba(220, 38, 38, 0.3);
}

.badge-pendencias.sem-urgentes {
  background: var(--cor-primaria-bg);
  color: var(--cor-primaria);
  border: 1px solid rgba(180, 83, 9, 0.2);
}

/* Indicador de mais pendÃªncias */
.etapa-pendencias-mais {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 6px;
  color: var(--cor-texto-terciario);
  font-size: var(--tamanho-xs);
  font-style: italic;
  cursor: pointer;
  border-radius: var(--raio-sm);
  transition: var(--transicao-rapida);
}

.etapa-pendencias-mais:hover {
  background: var(--cor-primaria-bg);
  color: var(--cor-primaria);
}

/* ========== INDICADOR DE NÃVEL DE ACESSO ========== */
.indicador-nivel-acesso {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: var(--tamanho-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.indicador-nivel-acesso i {
  font-size: 0.85rem;
}

.indicador-nivel-acesso.nivel-admin {
  background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(180, 83, 9, 0.2));
  color: #fca5a5;
  border: 1px solid rgba(220, 38, 38, 0.3);
}

.indicador-nivel-acesso.nivel-gestor {
  background: linear-gradient(135deg, rgba(202, 138, 4, 0.2), rgba(180, 83, 9, 0.2));
  color: #fcd34d;
  border: 1px solid rgba(202, 138, 4, 0.3);
}

.indicador-nivel-acesso.nivel-colaborador {
  background: rgba(101, 163, 13, 0.2);
  color: #bef264;
  border: 1px solid rgba(101, 163, 13, 0.3);
}

.indicador-nivel-acesso.nivel-visitante {
  background: rgba(120, 113, 108, 0.2);
  color: #a8a29e;
  border: 1px solid rgba(120, 113, 108, 0.3);
}

/* ========== MODAL DE PERMISSÃ•ES ========== */
.modal-permissoes {
  max-width: 700px;
  max-height: 85vh;
}

.modal-permissoes .modal-body {
  max-height: 65vh;
  overflow-y: auto;
}

.permissoes-acoes-topo {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--espacamento-md);
  padding-bottom: var(--espacamento-md);
  border-bottom: 1px solid var(--cor-borda);
}

.lista-permissoes {
  display: flex;
  flex-direction: column;
  gap: var(--espacamento-sm);
}

.item-permissao {
  display: flex;
  align-items: center;
  gap: var(--espacamento-md);
  padding: var(--espacamento-md);
  background: var(--cor-fundo);
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-md);
  transition: var(--transicao-rapida);
}

.item-permissao:hover {
  border-color: var(--cor-primaria);
  box-shadow: var(--sombra-sm);
}

.item-permissao.inativo {
  opacity: 0.5;
  background: var(--cor-fundo);
  border-style: dashed;
}

.permissao-avatar {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: var(--tamanho-sm);
  flex-shrink: 0;
}

.permissao-avatar.admin {
  background: linear-gradient(135deg, #dc2626, #b91c1c);
  color: white;
}

.permissao-avatar.gestor {
  background: linear-gradient(135deg, #ca8a04, #a16207);
  color: white;
}

.permissao-avatar.colaborador {
  background: linear-gradient(135deg, #65a30d, #4d7c0f);
  color: white;
}

.permissao-info {
  flex: 1;
  min-width: 0;
}

.permissao-email {
  font-weight: 600;
  font-size: var(--tamanho-sm);
  color: var(--cor-texto);
  margin-bottom: 4px;
}

.permissao-detalhes {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: var(--tamanho-xs);
  color: var(--cor-texto-terciario);
}

.permissao-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: var(--cor-primaria-bg);
  border-radius: var(--raio-sm);
  font-size: var(--tamanho-xs);
}

.permissao-badge.nivel {
  background: var(--cor-primaria);
  color: white;
  text-transform: uppercase;
  font-weight: 600;
}

.permissao-badge.setores {
  background: var(--cor-fundo-card);
  border: 1px solid var(--cor-borda);
}

.permissao-acoes {
  display: flex;
  gap: 6px;
}

.btn-permissao-acao {
  padding: 8px 10px;
  background: transparent;
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-sm);
  color: var(--cor-texto-secundario);
  cursor: pointer;
  transition: var(--transicao-rapida);
}

.btn-permissao-acao:hover {
  background: var(--cor-primaria-bg);
  border-color: var(--cor-primaria);
  color: var(--cor-primaria);
}

.btn-permissao-acao.perigo:hover {
  background: var(--status-bloqueada-bg);
  border-color: var(--cor-perigo);
  color: var(--cor-perigo);
}

/* Multi-select para setores/projetos */
.multi-select-permissoes {
  max-height: 150px;
  overflow-y: auto;
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-sm);
  padding: var(--espacamento-sm);
  background: var(--cor-fundo);
}

.checkbox-inline {
  display: flex;
  align-items: center;
  gap: var(--espacamento-sm);
  cursor: pointer;
}

.checkbox-inline input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--cor-primaria);
}

.lista-permissoes-vazia {
  text-align: center;
  padding: var(--espacamento-xl, 40px);
  color: var(--cor-texto-terciario);
}

.lista-permissoes-vazia i {
  font-size: 3rem;
  opacity: 0.3;
  margin-bottom: var(--espacamento-md);
  display: block;
}

/* ========== PAINEL FIXO DE RESPONSÃVEIS - VERSÃƒO MELHORADA ========== */
.painel-responsaveis-fixo {
  position: fixed;
  top: calc(var(--altura-header) + 130px);
  left: 16px;
  width: 320px;
  max-height: calc(100vh - var(--altura-header) - 160px);
  background: var(--cor-fundo-card);
  border-radius: var(--raio-lg);
  box-shadow: var(--sombra-lg);
  z-index: var(--z-painel);
  /* Usa flex para distribuir espaÃ§o */
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: transform 0.3s ease, opacity 0.3s ease;
  border: 1px solid var(--cor-borda);
}

.painel-responsaveis-fixo.colapsado {
  transform: translateX(-300px);
}

.painel-resp-header {
  display: flex;
  align-items: center;
  gap: var(--espacamento-sm);
  padding: var(--espacamento-md);
  background: linear-gradient(135deg, #44403c 0%, #292524 100%);
  color: white;
  font-weight: 600;
  font-size: var(--tamanho-sm);
  /* NÃ£o encolhe */
  flex-shrink: 0;
}

.painel-resp-header i {
  color: var(--cor-primaria-clara);
}

.btn-toggle-painel-resp {
  margin-left: auto;
  background: rgba(255,255,255,0.1);
  border: none;
  color: white;
  padding: 6px 8px;
  border-radius: var(--raio-sm);
  cursor: pointer;
  transition: var(--transicao-rapida);
}

.btn-toggle-painel-resp:hover {
  background: rgba(255,255,255,0.2);
}

.painel-responsaveis-fixo.colapsado .btn-toggle-painel-resp i {
  transform: rotate(180deg);
}

.painel-resp-conteudo {
  padding: var(--espacamento-sm);
  max-height: calc(100vh - var(--altura-header) - 180px); /* CORREÃ‡ÃƒO: Ajustado de 220px para 180px */
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* ========== CARD DO COLABORADOR - NOVO DESIGN ========== */
.resp-card-fixo {
  background: var(--cor-fundo);
  border-radius: var(--raio-md);
  border: 1px solid var(--cor-borda);
  transition: all 0.3s ease;
}

.resp-card-fixo.colapsado {
  overflow: hidden;
}

.resp-card-fixo:hover {
  border-color: var(--cor-primaria);
  box-shadow: var(--sombra-sm);
}

.resp-card-fixo.expandido {
  overflow: visible;
  box-shadow: 0 4px 15px rgba(232, 117, 17, 0.3);
  border-color: #E87511;
}

.resp-card-fixo.colapsado-secundario {
  opacity: 0.6;
  transform: scale(0.98);
  transition: all 0.3s ease;
}

.resp-card-fixo.colapsado-secundario:hover {
  opacity: 1;
  transform: scale(1);
}

/* Header clicÃ¡vel */
.resp-fixo-header-clicavel {
  display: flex;
  align-items: center;
  gap: var(--espacamento-sm);
  padding: 12px;
  cursor: pointer;
  transition: background 0.2s ease;
  border-radius: var(--raio-md) var(--raio-md) 0 0;
  /* Garante que o header nÃ£o seja afetado pelo overflow do pai */
  position: relative;
  z-index: 1;
  background: var(--cor-fundo);
}

.resp-card-fixo.colapsado .resp-fixo-header-clicavel {
  border-radius: var(--raio-md);
}

.resp-fixo-header-clicavel:hover {
  background: var(--cor-primaria-bg);
}

.resp-fixo-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--cor-primaria), var(--cor-primaria-clara));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: var(--tamanho-sm);
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(180, 83, 9, 0.3);
}

.resp-fixo-info {
  flex: 1;
  min-width: 0;
}

.resp-fixo-nome {
  font-weight: 600;
  font-size: var(--tamanho-sm);
  color: var(--cor-texto);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.resp-fixo-cargo {
  font-size: var(--tamanho-xs);
  color: var(--cor-texto-terciario);
}

/* Mini badges no header */
.resp-fixo-resumo-mini {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.resp-mini-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 3px 6px;
  background: var(--cor-primaria-bg);
  color: var(--cor-primaria);
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
}

.resp-mini-badge.pendente {
  background: rgba(202, 138, 4, 0.15);
  color: var(--cor-aviso);
}

.resp-mini-badge.neutro {
  background: var(--cor-fundo);
  color: var(--cor-texto-terciario);
}

.btn-expandir-colaborador {
  width: 28px;
  height: 28px;
  border: none;
  background: var(--cor-fundo-card);
  color: var(--cor-texto-terciario);
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.btn-expandir-colaborador:hover {
  background: var(--cor-primaria);
  color: white;
}

.btn-expandir-colaborador i {
  transition: transform 0.3s ease;
}

/* ========== CONTEÃšDO EXPANSÃVEL ========== */
.resp-fixo-conteudo-expansivel {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease-out, opacity 0.3s ease, padding 0.3s ease;
  opacity: 0;
  padding: 0 12px;
  /* Importante para o cÃ¡lculo correto de altura */
  box-sizing: border-box;
}

.resp-fixo-conteudo-expansivel.visivel {
  /* Altura mÃ¡xima calculada: deixa espaÃ§o para header e margens */
  max-height: calc(70vh - 100px);
  /* Scroll interno FUNCIONAL */
  overflow-y: auto;
  overflow-x: hidden;
  opacity: 1;
  padding: 0 12px 12px 12px;
  /* Borda sutil no topo para separar do header */
  border-top: 1px solid var(--cor-borda);
  margin-top: 0;
  /* Fundo para garantir legibilidade durante scroll */
  background: var(--cor-fundo);
  /* Cantos arredondados na parte inferior */
  border-radius: 0 0 var(--raio-md) var(--raio-md);
}

/* NOVO: Scrollbar estilizada para o conteÃºdo expansÃ­vel */
.resp-fixo-conteudo-expansivel.visivel::-webkit-scrollbar {
  width: 8px;
  display: block; /* ForÃ§a exibiÃ§Ã£o */
}

.resp-fixo-conteudo-expansivel.visivel::-webkit-scrollbar-track {
  background: var(--cor-fundo-card);
  border-radius: 4px;
  margin: 4px 0;
}

.resp-fixo-conteudo-expansivel.visivel::-webkit-scrollbar-thumb {
  background: var(--cor-borda-forte);
  border-radius: 4px;
  min-height: 40px; /* Tamanho mÃ­nimo para ser clicÃ¡vel */
}

.resp-fixo-conteudo-expansivel.visivel::-webkit-scrollbar-thumb:hover {
  background: var(--cor-primaria);
}

/* Barra de progresso */
.resp-progresso-container {
  margin-bottom: 12px;
  padding: 10px;
  background: var(--cor-fundo);
  border-radius: var(--raio-sm);
}

.resp-progresso-info {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.resp-progresso-texto {
  font-size: var(--tamanho-xs);
  font-weight: 600;
}

.resp-progresso-detalhe {
  font-size: var(--tamanho-xs);
  color: var(--cor-texto-terciario);
}

.resp-progresso-barra {
  height: 6px;
  background: var(--cor-borda);
  border-radius: 3px;
  overflow: hidden;
}

.resp-progresso-preenchimento {
  height: 100%;
  border-radius: 3px;
  transition: width 0.5s ease;
}

/* Grid de estatÃ­sticas */
.resp-estatisticas-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}

.resp-stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 4px;
  background: var(--cor-fundo);
  border-radius: var(--raio-sm);
  text-align: center;
  transition: all 0.2s ease;
}

.resp-stat-item:hover {
  background: var(--cor-primaria-bg);
  transform: translateY(-2px);
}

.resp-stat-item.alerta {
  background: rgba(220, 38, 38, 0.08);
}

.resp-stat-item i {
  font-size: 0.85rem;
  margin-bottom: 4px;
}

.resp-stat-valor {
  font-size: var(--tamanho-sm);
  font-weight: 700;
  color: var(--cor-texto);
  line-height: 1;
}

.resp-stat-label {
  font-size: 9px;
  color: var(--cor-texto-terciario);
  text-transform: uppercase;
  margin-top: 2px;
}

/* Grupos de envolvimentos */
.resp-envolvimento-grupo {
  margin-bottom: 10px;
}

.resp-envolvimento-titulo {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  font-weight: 600;
  color: var(--cor-texto-terciario);
  text-transform: uppercase;
  padding: 6px 0;
  border-bottom: 1px solid var(--cor-borda);
  margin-bottom: 6px;
}

.resp-envolvimento-titulo i {
  color: var(--cor-primaria);
  font-size: 11px;
}

.resp-grupo-contador {
  margin-left: auto;
  background: var(--cor-primaria-bg);
  color: var(--cor-primaria);
  padding: 2px 6px;
  border-radius: 8px;
  font-size: 9px;
  font-weight: 700;
}

.resp-envolvimento-lista {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Item de setor */
.resp-envolvimento-item.setor-clicavel {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: linear-gradient(135deg, #44403c, #292524);
  color: #e7e5e4;
  border-radius: var(--raio-sm);
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.resp-envolvimento-item.setor-clicavel:hover {
  background: linear-gradient(135deg, var(--cor-primaria), var(--cor-primaria-hover));
  transform: translateX(4px);
  border-color: var(--cor-primaria-clara);
}

.resp-item-nome {
  flex: 1;
  font-size: var(--tamanho-xs);
  font-weight: 500;
}

.resp-item-seta {
  font-size: 0.6rem;
  opacity: 0;
  transition: all 0.2s ease;
  margin-left: auto;
}

.resp-envolvimento-item:hover .resp-item-seta,
.resp-projeto-item-completo:hover .resp-item-seta,
.resp-etapa-item-completo:hover .resp-item-seta {
  opacity: 1;
  transform: translateX(3px);
}

/* Item de projeto completo */
.resp-projeto-item-completo {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px;
  background: var(--cor-fundo);
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-sm);
  cursor: pointer;
  transition: all 0.2s ease;
}

.resp-projeto-item-completo:hover {
  background: var(--cor-primaria-bg);
  border-color: var(--cor-primaria);
  transform: translateX(4px);
}

.resp-projeto-linha-principal {
  display: flex;
  align-items: center;
  gap: 6px;
}

.resp-projeto-nome {
  flex: 1;
  font-size: var(--tamanho-xs);
  font-weight: 600;
  color: var(--cor-texto);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.resp-projeto-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 10px;
}

.resp-projeto-setor {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--cor-texto-terciario);
}

.resp-projeto-setor i {
  font-size: 9px;
  color: var(--cor-primaria);
}

.resp-projeto-pendentes {
  display: flex;
  align-items: center;
  gap: 3px;
  color: var(--cor-aviso);
  font-weight: 500;
}

.resp-projeto-ok {
  display: flex;
  align-items: center;
  gap: 3px;
  color: var(--cor-sucesso);
}

/* Item de etapa completo */
.resp-etapa-item-completo {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px 10px;
  background: var(--cor-fundo-card);
  border: 1px solid var(--cor-borda);
  border-left: 3px solid var(--cor-primaria);
  border-radius: 0 var(--raio-sm) var(--raio-sm) 0;
  cursor: pointer;
  transition: all 0.2s ease;
}

.resp-etapa-item-completo:hover {
  background: var(--cor-primaria-bg);
  border-color: var(--cor-primaria);
  transform: translateX(4px);
}

.resp-etapa-linha-principal {
  display: flex;
  align-items: center;
  gap: 6px;
}

.resp-etapa-nome {
  flex: 1;
  font-size: var(--tamanho-xs);
  font-weight: 500;
  color: var(--cor-texto);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.resp-etapa-status-mini {
  padding: 2px 6px;
  border-radius: 8px;
  font-size: 9px;
  font-weight: 600;
  white-space: nowrap;
}

.resp-etapa-meta {
  font-size: 10px;
}

.resp-etapa-projeto {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--cor-texto-terciario);
}

.resp-etapa-projeto i {
  font-size: 9px;
}

/* Ver mais */
.resp-ver-mais {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px;
  color: var(--cor-primaria);
  font-size: var(--tamanho-xs);
  font-weight: 500;
  cursor: pointer;
  border-radius: var(--raio-sm);
  transition: all 0.2s ease;
}

.resp-ver-mais:hover {
  background: var(--cor-primaria-bg);
}

/* Sem envolvimento */
.resp-sem-envolvimento {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px;
  color: var(--cor-texto-terciario);
  font-size: var(--tamanho-xs);
  text-align: center;
}

.resp-sem-envolvimento i {
  font-size: 1.5rem;
  opacity: 0.4;
}

/* BotÃµes de aÃ§Ã£o */
.resp-acoes-container {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--cor-borda);
}

.btn-resp-acao {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  padding: 8px 6px;
  border: 1px solid var(--cor-borda);
  border-radius: var(--raio-sm);
  background: var(--cor-fundo);
  color: var(--cor-texto-secundario);
  font-size: 10px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transicao-rapida);
}

.btn-resp-acao:hover:not(:disabled) {
  background: var(--cor-primaria);
  border-color: var(--cor-primaria);
  color: white;
}

.btn-resp-acao:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.btn-resp-acao i {
  font-size: 0.75rem;
}

.btn-resp-acao span {
  display: none;
}

@media (min-width: 400px) {
  .btn-resp-acao span {
    display: inline;
  }
}

/* REVISAR: bloco duplicado de badge de prioridade (mantido por segurança) */`r`n/* Mini badge de prioridade (já existente, apenas garantindo) */
.mini-badge-prioridade {
  min-width: 20px;
  width: 20px;
  height: 20px;
  padding: 0;
  background: var(--cor-primaria);
  color: white;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 700;
  flex-shrink: 0;
}

.mini-badge-prioridade.p1 {
  background: #dc2626;
}

.mini-badge-prioridade.p2 {
  background: #ea580c;
}

.mini-badge-prioridade.p3 {
  background: #ca8a04;
}

/* ========== STATS CLICÃVEIS NO PAINEL DE RESPONSÃVEIS ========== */
.resp-estatisticas-grid.compacto {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  margin-bottom: 8px;
}

.resp-stat-item.clicavel {
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.2s ease;
  position: relative;
}

.resp-stat-item.clicavel:hover {
  border-color: var(--cor-primaria);
  transform: translateY(-2px);
  box-shadow: var(--sombra-sm);
}

.resp-stat-item.clicavel.ativo {
  border-color: var(--cor-primaria);
  background: var(--cor-primaria-bg);
}

.resp-stat-item.clicavel.ativo::after {
  content: '';
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 6px solid var(--cor-primaria);
}

/* SeÃ§Ãµes colapsÃ¡veis */
.resp-secao-colapsavel {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height 0.3s ease, opacity 0.2s ease, margin 0.3s ease;
  margin-top: 0;
}

.resp-secao-colapsavel.visivel {
  max-height: 500px;
  opacity: 1;
  margin-top: 8px;
  overflow-y: auto;
}

/* AnimaÃ§Ã£o suave para cards deslocados */
.card-deslocando-expansao {
  transition: top 0.3s ease, left 0.3s ease !important;
}

/* Indicador visual de seÃ§Ã£o ativa */
.resp-stat-indicador {
  position: absolute;
  top: 4px;
  right: 4px;
  font-size: 8px;
  color: var(--cor-primaria);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.resp-stat-item.clicavel:hover .resp-stat-indicador,
.resp-stat-item.clicavel.ativo .resp-stat-indicador {
  opacity: 1;
}

</style>